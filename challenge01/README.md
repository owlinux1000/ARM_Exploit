# Challenge0

## はじめに

第0章では、Exploitには欠かせないシェルコード作成について学びます。シェルコードとは、攻撃の断片コードのようなもので、アセンブリ言語で作成し、アセンブルしたバイナリ値などをExploit コードでは利用します。まずは、ARM の基本的な構文や仕組みについて **Exploit開発が行える程度** のご説明をします。次に実際のシェルコードを作成し、その動きを解説します。最後に、演習問題を通してどのようにシェルコードを扱うのかを理解します。

## ARM アセンブリ基礎

ARM の主要なレジスタには、r0 ~ r15レジスタとcpsrレジスタなどがあります。特にr11 ~ r15ジレスタは特殊な用途に使われるため以下のような別名が付けられています。
- r11 レジスタ：フレームポインタ(fp)
- r12 レジスタ：インストラクションポインタ(ip)
- r13 レジスタ：スタックポインタ(sp)
- r14 レジスタ：リンクレジスタ(lr)
また、cpsrレジスタはx86のeflagsレジスタのようなものでフラグ管理をしています。特に下位5bit目のフラグは重要な値になっており、ARMのARMステートとThumbステートと切り替える役割を持っています。ARMステートとThumbステートについては、後述します。  

ARM では、r0 ~ r3レジスタに引数を設定し、r0レジスタに戻り値がセットされます。5個以上の引数はスタック渡しされます。また、システムコールを直接呼ぶ場合は、Linuxにおいてはr7レジスタにシステムコール番号、r0 ~ r6レジスタに引数、r0レジスタに戻り値がセットされます。

では、まずはじめに`Hello` を出力するプログラムを作成してみましょう。様々な命令を紹介するために少し冗長に構築しています。

```asm
.text
.global _start
_start:
        eor r0, r0     @ r0 = 0
        add r0, #1     @ r0 += 1
        adr r1, s      @ r1 = &s
        mov r2, #6     @ r2 = 6
        mov r7, #4     @ r7 = 4
        svc 0          @ write(1, &s, 6)
        eor r0, r0     @ r0 = 0
        add r7, r0, #1 @ r7 = 1
        svc 0          @ exit(0)
s:
  .asciz "Hello\n"
```

## シェルコード作成

## challenge0



